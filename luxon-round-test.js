import { DateTime } from './luxon-round.js';

let pass = 0, fail = 0;

const test = (op, time, unit, multiple, expected) => {
  const actual = DateTime.fromISO(time)[op](unit, multiple).toISO();
  actual === expected
    ? ++pass
    : ++fail;
  console.log(`${op}(${time}) ${actual === expected ? '=' : '!='} ${expected}`);
}

test('floor', "2025-10-03T11:45:11.014+02:00", 'minute', 15, "2025-10-03T11:45:00.000+02:00");
test('floor', "2025-10-03T12:59:12.014+02:00", 'minute', 15, "2025-10-03T12:45:00.000+02:00");
test('floor', "2025-10-03T13:00:00.000+02:00", 'minute', 15, "2025-10-03T13:00:00.000+02:00");
test('floor', "2025-10-03T14:00:01.014+02:00", 'minute',  5, "2025-10-03T14:00:00.000+02:00");
test('floor', "2025-10-03T15:45:11.014+02:00", 'day', 10, "2025-09-30T00:00:00.000+02:00");
test('floor', "2025-08-03T16:59:12.014+02:00", 'month', 3, "2025-06-01T00:00:00.000+02:00");
test('floor', "2025-10-03T17:00:00.000+02:00", 'year', 100, "2000-01-01T00:00:00.000+01:00");

test('round', "2025-10-03T11:45:11.014+02:00", 'minute', 15, "2025-10-03T11:45:00.000+02:00");
test('round', "2025-10-03T12:59:12.014+02:00", 'minute', 15, "2025-10-03T13:00:00.000+02:00");
test('round', "2025-10-03T13:00:00.000+02:00", 'minute', 15, "2025-10-03T13:00:00.000+02:00");
test('round', "2025-10-03T14:00:01.014+02:00", 'minute',  5, "2025-10-03T14:00:00.000+02:00");
test('round', "2025-10-03T15:45:11.014+02:00", 'day', 10, "2025-09-30T00:00:00.000+02:00");
test('round', "2025-09-03T16:59:12.014+02:00", 'month', 1, "2025-09-01T00:00:00.000+02:00");
test('round', "2025-10-03T17:00:00.000+02:00", 'year', 100, "2000-01-01T00:00:00.000+01:00");

test('ceil', "2025-10-03T11:45:11.014+02:00", 'minute', 15, "2025-10-03T12:00:00.000+02:00");
test('ceil', "2025-10-03T12:59:12.014+02:00", 'minute', 15, "2025-10-03T13:00:00.000+02:00");
test('ceil', "2025-10-03T13:00:00.000+02:00", 'minute', 15, "2025-10-03T13:00:00.000+02:00");
test('ceil', "2025-10-03T14:00:01.014+02:00", 'minute',  5, "2025-10-03T14:05:00.000+02:00");
test('ceil', "2025-10-03T15:45:11.014+02:00", 'day', 10, "2025-10-10T00:00:00.000+02:00");
test('ceil', "2025-09-03T16:59:12.014+02:00", 'month', 1, "2025-10-01T00:00:00.000+02:00");
test('ceil', "2025-10-03T17:00:00.000+02:00", 'year', 100, "2100-01-01T00:00:00.000+01:00");

console.log(`${fail}/${pass + fail} tests failed`);